<!DOCTYPE html>
<html lang="en" ng-app="app">
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="Content-Security-Policy" content="default-src *; style-src 'self' http://* 'unsafe-inline'; script-src 'self' http://* 'unsafe-inline' 'unsafe-eval'" />
        <title>GeoJSON visualization webpage</title>
        <!-- Favicon -->
        <link rel="icon" href="favicon.ico" type="image/x-icon">
        <!-- Bootstrap -->
        <link href="css/font-awesome.min.css" rel="stylesheet">
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <!-- Custom -->
        <link href="style.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>
    <body ng-controller="mainController">
       
        <style>
        /* Always set the map height explicitly to define the size of the div
        * element that contains the map. */
        #map {
        height: 100%;
        }
        /* Optional: Makes the sample page fill the window. */
        html, body {
        height: 100%;
        margin: 0;
        padding: 0;
        }
        </style>

        <div id="map"></div>
        <script>
        // This example creates circles on the map, representing populations in North
        // America.

        // First, create an object containing LatLng and population for each city.
        var citymap = {
            Naga: {
                center: {lat: 13.696360, lng: 122.915039},
                intensity: 2714856,
                title: "tit_1",
                desc: "decs_1"
            },
            Manila: {
                center: {lat: 14.599512, lng: 120.984219},
                intensity: 405837,
                title: "tit_2",
                desc: "decs_2"
            },
            Apari: {
                center: {lat: 18.330736, lng: 121.267090},
                intensity: 3857799,
                title: "tit_3",
                desc: "decs_3"
            },
            Negros: {
                center: {lat: 9.673523, lng: 122.596436},
                intensity: 603502,
                title: "tit_4",
                desc: "decs_4"
            }
        };

        function initMap() {
            // Create the map.
            var map = new google.maps.Map(document.getElementById('map'), {
              zoom: 6,
              center: {lat: 12.500305, lng: 121.958687},
              mapTypeId: 'terrain'
            });

            // Construct the circle for each value in citymap.
            // Note: We scale the area of the circle based on the intensity.
            for (var city in citymap) {
                // Add the circle for this city to the map.
                var cityCircle = new google.maps.Circle({
                    strokeColor: '#FF0000',
                    strokeOpacity: 0.25,
                    strokeWeight: 60,
                    fillColor: '#FF0000',
                    fillOpacity: 0.4,
                    map: map,
                    center: citymap[city].center,
                    radius: Math.sqrt(citymap[city].intensity) * 70
                });

                var marker = new google.maps.Marker({
                    position: citymap[city].center,
                    icon: "img/pin.png",
                    map: map,
                    title: citymap[city].title
                });

                var infowindow = new google.maps.InfoWindow({
                    maxWidth: 200
                });

                var content = citymap[city].desc;

                google.maps.event.addListener(marker,'click', (function(marker,content,infowindow){ 
                    return function() {
                        infowindow.setContent(content);
                        infowindow.open(map,marker);
                    };
                })(marker,content,infowindow));  
            }
        }
        </script>
        <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD2-JYz_IISnez8rUvd3M322k-nSx6m7WA&callback=initMap">
        </script>

        <!--Installs-->
        <script src="js/jquery-2.1.4.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/angular.min.js"></script>
        <script src="main.js"></script>
    </body>
</html>